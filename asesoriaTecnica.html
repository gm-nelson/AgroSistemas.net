<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asesoría Técnica - Agrosistemas</title>
    <link rel="icon" type="image/webp" href="favicon.webp">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS (OpenStreetMap) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <!-- Leaflet Draw CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"/>
    <style>
        /* Reset y estilos base (mantener todo el CSS anterior igual) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            color: #333;
            line-height: 1.6;
            background-color: #FFFFFF;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        ul {
            list-style: none;
        }
        
        .btn {
            display: inline-block;
            background-color: #00a553;
            color: white;
            padding: 14px 32px;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            letter-spacing: 0.5px;
        }
        
        .btn:hover {
            background-color: #008a45;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 165, 83, 0.3);
        }
        
        .btn-secondary {
            background-color: #1772af;
        }
        
        .btn-secondary:hover {
            background-color: #145c92;
            box-shadow: 0 8px 20px rgba(23, 114, 175, 0.3);
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: #111;
            font-size: 2.4rem;
            font-weight: 700;
        }
        
        /* Header */
        header {
            background-color: #FFFFFF;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        header.scrolled {
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
        }
        
        .main-header {
            padding: 20px 0;
        }
        
        .main-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            height: 100px;
            display: flex;
            align-items: center;
        }
        
        .logo img {
            height: 100px;
            width: auto;
        }
        
        .mobile-menu-btn {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #111;
            background: none;
            border: none;
            padding: 5px;
        }
        
        /* Hero Section - Específico para Asesoría Técnica */
        .page-hero {
            background: linear-gradient(135deg, rgba(0, 165, 83, 0.9) 0%, rgba(23, 114, 175, 0.9) 100%);
            color: white;
            padding: 160px 0 80px;
            text-align: center;
            margin-top: 80px;
        }
        
        .page-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.1;
        }
        
        .page-hero p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 40px;
            opacity: 0.9;
        }
        
        /* Servicios Detallados */
        .servicios-detalle {
            padding: 100px 0;
            background-color: #FFFFFF;
        }
        
        .servicios-grid-detalle {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
        }
        
        .servicio-detalle-card {
            background-color: #FFFFFF;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 25px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            border: 1px solid #f0f0f0;
            height: 100%;
        }
        
        .servicio-detalle-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border-color: #00a553;
        }
        
        .servicio-detalle-icon {
            background-color: #f8f9fa;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #00a553;
        }
        
        .servicio-detalle-content {
            padding: 30px;
        }
        
        .servicio-detalle-content h3 {
            margin-bottom: 15px;
            color: #111;
            font-size: 1.6rem;
        }
        
        .servicio-detalle-content p {
            color: #666;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        
        .servicio-beneficios {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .servicio-beneficios h4 {
            color: #1772af;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .servicio-beneficios ul {
            list-style: disc;
            padding-left: 20px;
            color: #666;
        }
        
        .servicio-beneficios li {
            margin-bottom: 8px;
        }
        
        /* Diseñador de Riego CAD */
        .disenador-riego {
            padding: 100px 0;
            background-color: #f8f9fa;
        }
        
        .disenador-intro {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 40px;
            color: #666;
            font-size: 1.1rem;
        }
        
        .disenador-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            height: 700px;
        }
        
        @media (max-width: 992px) {
            .disenador-grid {
                grid-template-columns: 1fr;
                height: auto;
            }
        }
        
        /* Panel del Mapa */
        .mapa-panel {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .mapa-header {
            padding: 20px;
            background-color: #1772af;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .mapa-header h3 {
            font-size: 1.3rem;
            margin: 0;
        }
        
        .mapa-container {
            flex: 1;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }
        
        .mapa-controls {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            width: 300px;
        }
        
        .search-container {
            margin-bottom: 15px;
        }
        
        #location-search {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .mapa-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .mapa-btn {
            background-color: #00a553;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            flex: 1;
            min-width: 120px;
        }
        
        .mapa-btn:hover {
            background-color: #008a45;
        }
        
        .mapa-btn.secondary {
            background-color: #1772af;
        }
        
        .mapa-btn.secondary:hover {
            background-color: #145c92;
        }
        
        .area-display {
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        /* Panel de Diseño CAD */
        .cad-panel {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .cad-header {
            padding: 20px;
            background-color: #00a553;
            color: white;
        }
        
        .cad-header h3 {
            font-size: 1.3rem;
            margin: 0 0 10px 0;
        }
        
        .cad-header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .cad-tabs {
            display: flex;
            background-color: #f0f0f0;
            border-bottom: 1px solid #ddd;
        }
        
        .cad-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }
        
        .cad-tab.active {
            background-color: white;
            color: #00a553;
            border-bottom: 3px solid #00a553;
        }
        
        .cad-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .cad-tab-content {
            display: none;
        }
        
        .cad-tab-content.active {
            display: block;
        }
        
        .cad-controls {
            margin-bottom: 20px;
        }
        
        .control-group {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .control-group h4 {
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1rem;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .control-label {
            width: 120px;
            font-size: 0.9rem;
            color: #666;
        }
        
        select, input[type="number"] {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        .color-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        /* Colores para tipos de tubería */
        .color-principal {
            background-color: #ff6b6b;
        }
        
        .color-secundaria {
            background-color: #4ecdc4;
        }
        
        .color-regante {
            background-color: #45b7d1;
        }
        
        .elementos-lista {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .elemento-btn {
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }
        
        .elemento-btn:hover {
            background-color: #e0e0e0;
        }
        
        .elemento-btn.active {
            background-color: #00a553;
            color: white;
            border-color: #00a553;
        }
        
        .cad-resumen {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .cad-resumen h4 {
            margin-bottom: 10px;
            color: #1772af;
        }
        
        .resumen-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .secciones-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .seccion-item {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .seccion-item:hover {
            background-color: #e0e0e0;
        }
        
        .seccion-item.active {
            background-color: #00a553;
            color: white;
        }
        
        .seccion-config {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        /* Panel de Emisores */
        .emisor-panel {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .emisor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .emisor-header h4 {
            color: #333;
            margin: 0;
        }
        
        .emisor-info {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border: 1px solid #eee;
        }
        
        /* Contacto */
        .contacto {
            padding: 100px 0;
            background-color: #FFFFFF;
        }
        
        .contacto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 50px;
        }
        
        .contact-info-card {
            background-color: #FFFFFF;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.05);
            border: 1px solid #f0f0f0;
        }
        
        .contact-info-card h3 {
            margin-bottom: 30px;
            color: #111;
            font-size: 1.8rem;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .contact-item:hover {
            background-color: #e8f4fd;
            transform: translateX(5px);
        }
        
        .contact-icon {
            background-color: #1772af;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-size: 1.2rem;
        }
        
        .contact-text h4 {
            margin-bottom: 5px;
            color: #111;
            font-size: 1.1rem;
        }
        
        .contact-text a {
            color: #1772af;
            transition: color 0.3s;
            font-weight: 500;
        }
        
        .contact-text a:hover {
            color: #00a553;
        }
        
        .contact-text p {
            color: #666;
            font-size: 0.95rem;
        }
        
        .map-container {
            height: 400px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .map-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Footer */
        footer {
            background-color: #FFFFFF;
            color: #333;
            padding: 60px 0 30px;
            text-align: center;
            border-top: 1px solid #f0f0f0;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }
        
        .footer-logo {
            margin-bottom: 10px;
        }
        
        .footer-logo img {
            height: 100px;
            width: auto;
        }
        
        .footer-text {
            color: #666;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.7;
        }
        
        .copyright {
            padding-top: 30px;
            border-top: 1px solid #f0f0f0;
            font-size: 0.9rem;
            color: #888;
            width: 100%;
            margin-top: 20px;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .page-hero h1 {
                font-size: 2.8rem;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
            
            nav {
                position: fixed;
                top: 0;
                right: -100%;
                width: 280px;
                height: 100vh;
                background-color: #FFFFFF;
                box-shadow: -5px 0 25px rgba(0,0,0,0.1);
                transition: right 0.3s;
                z-index: 1001;
                padding: 90px 30px 30px;
            }
            
            nav.active {
                right: 0;
            }
            
            nav ul {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul li a {
                font-weight: 600;
                color: #111;
                font-size: 1.1rem;
                display: block;
                padding: 10px 0;
            }
            
            .page-hero {
                padding: 140px 0 60px;
                margin-top: 80px;
            }
            
            .page-hero h1 {
                font-size: 2.4rem;
            }
            
            .page-hero p {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 2rem;
                margin-bottom: 40px;
            }
            
            .servicios-detalle, .disenador-riego, .contacto {
                padding: 70px 0;
            }
            
            .contact-item {
                flex-direction: column;
                text-align: center;
            }
            
            .contact-icon {
                margin-right: 0;
                margin-bottom: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .page-hero h1 {
                font-size: 2rem;
            }
            
            .page-hero p {
                font-size: 1rem;
            }
            
            .servicios-grid-detalle {
                grid-template-columns: 1fr;
            }
        }
        
        /* Estilos de navegación */
        nav ul {
            display: flex;
            gap: 35px;
        }
        
        nav ul li a {
            font-weight: 600;
            color: #111;
            padding: 8px 0;
            position: relative;
            font-size: 1rem;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: #00a553;
        }
        
        nav ul li a:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #00a553;
            transition: width 0.3s;
        }
        
        nav ul li a:hover:after {
            width: 100%;
        }
        
        .current-page {
            color: #00a553 !important;
        }
        
        .current-page:after {
            width: 100% !important;
        }
        
        /* Scroll suave */
        html {
            scroll-behavior: smooth;
        }
        
        /* Animaciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            opacity: 0;
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .fade-in.delay-1 {
            animation-delay: 0.2s;
        }
        
        .fade-in.delay-2 {
            animation-delay: 0.4s;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="mainHeader">
        <div class="main-header">
            <div class="container">
                <div class="logo">
                    <img src="logo.png" alt="Agrosistemas Logo">
                </div>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <nav id="mainNav">
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="asesoriaTecnica.html" class="current-page">Asesoría Técnica</a></li>
                        <li><a href="sistemaDeRiego.html">Sistemas de Riego</a></li>
                        <li><a href="energiaSolar.html">Energía Solar</a></li>
                        <li><a href="equipamientoAgricola.html">Equipamiento</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="page-hero">
        <div class="container">
            <h1 class="fade-in">Asesoría Técnica Agrícola</h1>
            <p class="fade-in delay-1">Soluciones técnicas especializadas para optimizar cada etapa de tu producción agrícola. Implementamos tecnología de punta para maximizar rendimientos y rentabilidad.</p>
            <a href="#contacto" class="btn fade-in delay-2">Solicitar Asesoría</a>
        </div>
    </section>

    <!-- Servicios Detallados -->
    <section class="servicios-detalle" id="servicios">
        <div class="container">
            <h2 class="section-title">Nuestros Servicios de Asesoría</h2>
            <div class="servicios-grid-detalle">
                <!-- ... (mantener el contenido de servicios igual) ... -->
            </div>
        </div>
    </section>

    <!-- Diseñador de Riego CAD -->
    <section class="disenador-riego" id="disenador-riego">
        <div class="container">
            <h2 class="section-title">Diseñador de Sistemas de Riego</h2>
            <p class="disenador-intro fade-in">Diseña tu sistema de riego de manera interactiva. Ubica tu predio en el mapa, delimita las secciones y configura tuberías, emisores y elementos del sistema.</p>
            
            <div class="disenador-grid">
                <!-- Panel del Mapa -->
                <div class="mapa-panel fade-in">
                    <div class="mapa-header">
                        <h3>Ubicación del Predio</h3>
                        <div class="area-display" id="areaDisplay">Área: 0 m²</div>
                    </div>
                    <div class="mapa-container">
                        <div id="map"></div>
                        <div class="mapa-controls">
                            <div class="search-container">
                                <input type="text" id="location-search" placeholder="Buscar ubicación...">
                                <button id="searchBtn" class="mapa-btn" style="margin-top: 5px; padding: 5px 10px; font-size: 0.8rem;">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                            </div>
                            <div class="mapa-buttons">
                                <button class="mapa-btn" id="drawPolygonBtn">
                                    <i class="fas fa-draw-polygon"></i> Delimitar Terreno
                                </button>
                                <button class="mapa-btn secondary" id="measureBtn">
                                    <i class="fas fa-ruler"></i> Medir
                                </button>
                                <button class="mapa-btn secondary" id="clearBtn">
                                    <i class="fas fa-trash"></i> Limpiar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Panel de Diseño CAD -->
                <div class="cad-panel fade-in delay-1">
                    <div class="cad-header">
                        <h3>Diseño del Sistema de Riego</h3>
                        <p>Configura tuberías, emisores y secciones del sistema</p>
                    </div>
                    
                    <div class="cad-tabs">
                        <div class="cad-tab active" data-tab="tuberias">Tuberías</div>
                        <div class="cad-tab" data-tab="elementos">Elementos</div>
                        <div class="cad-tab" data-tab="secciones">Secciones</div>
                        <div class="cad-tab" data-tab="emisores">Emisores</div>
                    </div>
                    
                    <div class="cad-content">
                        <!-- Pestaña de Tuberías -->
                        <div class="cad-tab-content active" id="tuberias-tab">
                            <div class="control-group">
                                <h4>Tubería Principal</h4>
                                <div class="control-row">
                                    <div class="control-label">Color:</div>
                                    <div class="color-indicator color-principal"></div>
                                    <div>Rojo</div>
                                </div>
                                <div class="control-row">
                                    <div class="control-label">Diámetro:</div>
                                    <select id="diametroPrincipal">
                                        <option value="2">2"</option>
                                        <option value="3">3"</option>
                                        <option value="4">4"</option>
                                        <option value="6">6"</option>
                                        <option value="8">8"</option>
                                        <option value="10">10"</option>
                                        <option value="12">12"</option>
                                        <option value="14">14"</option>
                                        <option value="16">16"</option>
                                        <option value="18">18"</option>
                                        <option value="20">20"</option>
                                    </select>
                                </div>
                                <div class="control-row">
                                    <div class="control-label">Tipo:</div>
                                    <select id="tipoPrincipal">
                                        <option value="pvc">PVC</option>
                                        <option value="manguera">Manguera</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <h4>Tubería Secundaria</h4>
                                <div class="control-row">
                                    <div class="control-label">Color:</div>
                                    <div class="color-indicator color-secundaria"></div>
                                    <div>Turquesa</div>
                                </div>
                                <div class="control-row">
                                    <div class="control-label">Diámetro:</div>
                                    <select id="diametroSecundaria">
                                        <option value="1">1"</option>
                                        <option value="1.5">1.5"</option>
                                        <option value="2">2"</option>
                                        <option value="3">3"</option>
                                        <option value="4">4"</option>
                                    </select>
                                </div>
                                <div class="control-row">
                                    <div class="control-label">Tipo:</div>
                                    <select id="tipoSecundaria">
                                        <option value="pvc">PVC</option>
                                        <option value="manguera">Manguera</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <h4>Tubería Regante</h4>
                                <div class="control-row">
                                    <div class="control-label">Color:</div>
                                    <div class="color-indicator color-regante"></div>
                                    <div>Azul</div>
                                </div>
                                <div class="control-row">
                                    <div class="control-label">Diámetro:</div>
                                    <select id="diametroRegante">
                                        <option value="0.5">1/2"</option>
                                        <option value="0.75">3/4"</option>
                                        <option value="1">1"</option>
                                    </select>
                                </div>
                                <div class="control-row">
                                    <div class="control-label">Tipo:</div>
                                    <select id="tipoRegante">
                                        <option value="pvc">PVC</option>
                                        <option value="manguera">Manguera</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="cad-resumen">
                                <h4>Resumen de Tuberías</h4>
                                <div class="resumen-item">
                                    <span>Principal:</span>
                                    <span id="metrosPrincipal">0 m</span>
                                </div>
                                <div class="resumen-item">
                                    <span>Secundaria:</span>
                                    <span id="metrosSecundaria">0 m</span>
                                </div>
                                <div class="resumen-item">
                                    <span>Regante:</span>
                                    <span id="metrosRegante">0 m</span>
                                </div>
                                <div class="resumen-item" style="font-weight: bold; border-top: 1px solid #ddd; padding-top: 8px;">
                                    <span>Total:</span>
                                    <span id="metrosTotal">0 m</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pestaña de Elementos -->
                        <div class="cad-tab-content" id="elementos-tab">
                            <div class="control-group">
                                <h4>Agregar Elementos al Diseño</h4>
                                <div class="elementos-lista">
                                    <div class="elemento-btn active" data-elemento="cabezal">
                                        <i class="fas fa-water-pump"></i> Cabezal
                                    </div>
                                    <div class="elemento-btn" data-elemento="purgaterminal">
                                        <i class="fas fa-faucet"></i> Purgas/Terminales
                                    </div>
                                    <div class="elemento-btn" data-elemento="tomagua">
                                        <i class="fas fa-tint"></i> Toma de Agua
                                    </div>
                                    <div class="elemento-btn" data-elemento="calle">
                                        <i class="fas fa-road"></i> Calles
                                    </div>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <h4>Configuración del Elemento</h4>
                                <div id="elementoConfig">
                                    <p>Selecciona un elemento para configurarlo</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pestaña de Secciones -->
                        <div class="cad-tab-content" id="secciones-tab">
                            <div class="control-group">
                                <h4>Secciones del Sistema (A1-Z10)</h4>
                                <div class="secciones-grid" id="seccionesGrid">
                                    <!-- Se generarán dinámicamente -->
                                </div>
                            </div>
                            
                            <div class="seccion-config" id="seccionConfig">
                                <h4>Configuración de Sección</h4>
                                <p>Selecciona una sección para configurarla</p>
                            </div>
                        </div>
                        
                        <!-- Pestaña de Emisores -->
                        <div class="cad-tab-content" id="emisores-tab">
                            <div class="control-group">
                                <h4>Tipo de Emisor</h4>
                                <div class="control-row">
                                    <div class="control-label">Tipo:</div>
                                    <select id="tipoEmisor">
                                        <option value="goteo">Goteo</option>
                                        <option value="aspersion">Aspersión</option>
                                        <option value="microaspersion">Microaspersión</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="emisor-panel">
                                <div class="emisor-header">
                                    <h4>Características del Emisor</h4>
                                    <div id="caudalTotal">Caudal Total: 0 L/h</div>
                                </div>
                                
                                <div class="control-row">
                                    <div class="control-label">Caudal:</div>
                                    <input type="number" id="caudalEmisor" min="1" max="100" value="4" step="0.5"> L/h
                                </div>
                                
                                <div class="control-row">
                                    <div class="control-label">Separación:</div>
                                    <input type="number" id="separacionEmisor" min="0.1" max="5" value="0.5" step="0.1"> m
                                </div>
                                
                                <div class="control-row">
                                    <div class="control-label">Separación surco:</div>
                                    <input type="number" id="separacionSurco" min="0.5" max="3" value="1.5" step="0.1"> m
                                </div>
                                
                                <div class="emisor-info">
                                    <div class="resumen-item">
                                        <span>Emisores por m²:</span>
                                        <span id="emisoresPorM2">0</span>
                                    </div>
                                    <div class="resumen-item">
                                        <span>Caudal por m²:</span>
                                        <span id="caudalPorM2">0 L/h</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contacto y Footer (mantener igual) -->
    
    <!-- Scripts -->
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <!-- Leaflet Draw JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    
    <script>
        // Variables globales
        let map;
        let drawnItems;
        let drawControl;
        let currentDrawMode = null;
        let areaTotal = 0;
        let selectedElement = 'cabezal';
        let secciones = {};
        let seccionActual = null;
        
        // Inicializar el mapa
        function initMap() {
            // Coordenadas de Los Mochis, Sinaloa
            const losMochis = [25.8133, -108.9719];
            
            // Crear mapa
            map = L.map('map').setView(losMochis, 15);
            
            // Añadir capa de OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(map);
            
            // Capa para dibujar elementos
            drawnItems = new L.FeatureGroup();
            map.addLayer(drawnItems);
            
            // Configurar herramientas de dibujo
            drawControl = new L.Control.Draw({
                position: 'topright',
                draw: {
                    polygon: {
                        allowIntersection: false,
                        shapeOptions: {
                            color: '#008a45',
                            fillColor: '#00a553',
                            fillOpacity: 0.3,
                            weight: 2
                        },
                        showArea: true,
                        metric: true
                    },
                    polyline: {
                        shapeOptions: {
                            color: '#ff0000',
                            weight: 2
                        },
                        showLength: true,
                        metric: true
                    },
                    rectangle: false,
                    circle: false,
                    marker: false,
                    circlemarker: false
                },
                edit: {
                    featureGroup: drawnItems,
                    remove: true
                }
            });
            
            map.addControl(drawControl);
            
            // Eventos de dibujo
            map.on(L.Draw.Event.CREATED, function(event) {
                const layer = event.layer;
                drawnItems.addLayer(layer);
                
                if (event.layerType === 'polygon') {
                    calcularAreaPoligono(layer);
                } else if (event.layerType === 'polyline') {
                    calcularLongitudPolilinea(layer);
                }
                
                // Desactivar modo de dibujo después de crear
                if (currentDrawMode) {
                    currentDrawMode.disable();
                    currentDrawMode = null;
                }
            });
            
            // Evento de edición
            map.on(L.Draw.Event.EDITED, function(event) {
                const layers = event.layers;
                layers.eachLayer(function(layer) {
                    if (layer instanceof L.Polygon) {
                        calcularAreaPoligono(layer);
                    } else if (layer instanceof L.Polyline) {
                        calcularLongitudPolilinea(layer);
                    }
                });
            });
            
            // Evento de eliminación
            map.on(L.Draw.Event.DELETED, function(event) {
                const layers = event.layers;
                layers.eachLayer(function(layer) {
                    if (layer instanceof L.Polygon) {
                        areaTotal = 0;
                        document.getElementById('areaDisplay').textContent = 'Área: 0 m²';
                        actualizarCalculos();
                        inicializarSecciones();
                    }
                });
            });
            
            // Inicializar secciones
            inicializarSecciones();
            
            // Calcular emisores iniciales
            calcularEmisores();
        }
        
        // Calcular área del polígono
        function calcularAreaPoligono(polygon) {
            // Calcular área usando Leaflet
            areaTotal = L.GeometryUtil.geodesicArea(polygon.getLatLngs()[0]);
            
            // Actualizar display
            document.getElementById('areaDisplay').textContent = 
                `Área: ${areaTotal.toFixed(2)} m² (${(areaTotal / 10000).toFixed(2)} ha)`;
            
            // Actualizar cálculos basados en área
            actualizarCalculos();
            
            // Generar secciones automáticamente
            generarSecciones();
        }
        
        // Calcular longitud de polilínea
        function calcularLongitudPolilinea(polyline) {
            const latlngs = polyline.getLatLngs();
            let length = 0;
            
            for (let i = 0; i < latlngs.length - 1; i++) {
                length += latlngs[i].distanceTo(latlngs[i + 1]);
            }
            
            // Mostrar longitud
            const areaDisplay = document.getElementById('areaDisplay');
            const currentArea = areaDisplay.textContent.includes('Longitud') ? 
                areaDisplay.textContent.split(' | ')[0] : areaDisplay.textContent;
            areaDisplay.textContent = `${currentArea} | Longitud: ${length.toFixed(2)} m`;
        }
        
        // Generar secciones automáticamente
        function generarSecciones() {
            const seccionesGrid = document.getElementById('seccionesGrid');
            seccionesGrid.innerHTML = '';
            
            // Crear 16 secciones (A1-D4)
            const letras = ['A', 'B', 'C', 'D'];
            const numeros = ['1', '2', '3', '4'];
            
            let contador = 0;
            for (let i = 0; i < letras.length && contador < 16; i++) {
                for (let j = 0; j < numeros.length && contador < 16; j++) {
                    const codigo = letras[i] + numeros[j];
                    
                    // Crear sección
                    secciones[codigo] = {
                        nombre: codigo,
                        area: areaTotal / 16, // Dividir área total en 16 partes
                        caudal: 0,
                        configurado: false
                    };
                    
                    // Crear elemento en la cuadrícula
                    const seccionElement = document.createElement('div');
                    seccionElement.className = 'seccion-item';
                    seccionElement.textContent = codigo;
                    seccionElement.dataset.seccion = codigo;
                    
                    seccionElement.addEventListener('click', function() {
                        seleccionarSeccion(codigo);
                    });
                    
                    seccionesGrid.appendChild(seccionElement);
                    contador++;
                }
            }
            
            // Seleccionar primera sección por defecto
            if (Object.keys(secciones).length > 0) {
                seleccionarSeccion(Object.keys(secciones)[0]);
            }
        }
        
        // Inicializar secciones vacías
        function inicializarSecciones() {
            const seccionesGrid = document.getElementById('seccionesGrid');
            seccionesGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #666;">Primero delimita el terreno en el mapa</p>';
        }
        
        // Seleccionar una sección
        function seleccionarSeccion(codigo) {
            // Quitar clase active de todas las secciones
            document.querySelectorAll('.seccion-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Agregar clase active a la sección seleccionada
            const seccionElement = document.querySelector(`.seccion-item[data-seccion="${codigo}"]`);
            if (seccionElement) {
                seccionElement.classList.add('active');
            }
            
            seccionActual = codigo;
            actualizarConfiguracionSeccion();
        }
        
        // Actualizar configuración de sección
        function actualizarConfiguracionSeccion() {
            const configDiv = document.getElementById('seccionConfig');
            
            if (!seccionActual || !secciones[seccionActual]) {
                configDiv.innerHTML = '<h4>Configuración de Sección</h4><p>Selecciona una sección para configurarla</p>';
                return;
            }
            
            const seccion = secciones[seccionActual];
            
            configDiv.innerHTML = `
                <h4>Configuración de Sección ${seccionActual}</h4>
                <div class="control-row">
                    <div class="control-label">Área:</div>
                    <div>${seccion.area.toFixed(2)} m²</div>
                </div>
                <div class="control-row">
                    <div class="control-label">Caudal calculado:</div>
                    <div id="caudalSeccionDisplay">${seccion.caudal.toFixed(2)} L/h</div>
                </div>
                <div class="control-row">
                    <div class="control-label">Separación surco:</div>
                    <input type="number" id="separacionSurcoSeccion" min="0.5" max="3" value="${seccion.separacionSurco || 1.5}" step="0.1" onchange="actualizarCaudalSeccion()"> m
                </div>
                <div class="control-row">
                    <div class="control-label">Separación emisor:</div>
                    <input type="number" id="separacionEmisorSeccion" min="0.1" max="5" value="${seccion.separacionEmisor || 0.5}" step="0.1" onchange="actualizarCaudalSeccion()"> m
                </div>
                <div class="control-row">
                    <div class="control-label">Caudal emisor:</div>
                    <input type="number" id="caudalEmisorSeccion" min="1" max="100" value="${seccion.caudalEmisor || 4}" step="0.5" onchange="actualizarCaudalSeccion()"> L/h
                </div>
            `;
            
            // Calcular caudal inicial
            actualizarCaudalSeccion();
        }
        
        // Actualizar caudal de sección
        function actualizarCaudalSeccion() {
            if (!seccionActual) return;
            
            const separacionSurco = parseFloat(document.getElementById('separacionSurcoSeccion').value) || 1.5;
            const separacionEmisor = parseFloat(document.getElementById('separacionEmisorSeccion').value) || 0.5;
            const caudalEmisor = parseFloat(document.getElementById('caudalEmisorSeccion').value) || 4;
            
            // Calcular emisores por metro lineal
            const emisoresPorMetro = 1 / separacionEmisor;
            
            // Calcular líneas de riego por metro
            const lineasPorMetro = 1 / separacionSurco;
            
            // Calcular caudal por m²
            const caudalPorM2 = emisoresPorMetro * lineasPorMetro * caudalEmisor;
            
            // Calcular caudal total para la sección
            const caudalTotal = caudalPorM2 * secciones[seccionActual].area;
            
            // Actualizar objeto sección
            secciones[seccionActual].caudal = caudalTotal;
            secciones[seccionActual].separacionSurco = separacionSurco;
            secciones[seccionActual].separacionEmisor = separacionEmisor;
            secciones[seccionActual].caudalEmisor = caudalEmisor;
            secciones[seccionActual].configurado = true;
            
            // Actualizar display
            document.getElementById('caudalSeccionDisplay').textContent = caudalTotal.toFixed(2) + ' L/h';
            
            // Actualizar caudal total
            actualizarCaudalTotal();
        }
        
        // Calcular emisores y caudal
        function calcularEmisores() {
            const caudalEmisor = parseFloat(document.getElementById('caudalEmisor').value) || 4;
            const separacionEmisor = parseFloat(document.getElementById('separacionEmisor').value) || 0.5;
            const separacionSurco = parseFloat(document.getElementById('separacionSurco').value) || 1.5;
            
            // Calcular emisores por m²
            const emisoresPorM2 = (1 / separacionEmisor) * (1 / separacionSurco);
            
            // Calcular caudal por m²
            const caudalPorM2 = emisoresPorM2 * caudalEmisor;
            
            // Actualizar displays
            document.getElementById('emisoresPorM2').textContent = emisoresPorM2.toFixed(2);
            document.getElementById('caudalPorM2').textContent = caudalPorM2.toFixed(2) + ' L/h';
            
            // Actualizar caudal total si hay área definida
            if (areaTotal > 0) {
                const caudalTotal = caudalPorM2 * areaTotal;
                document.getElementById('caudalTotal').textContent = `Caudal Total: ${caudalTotal.toFixed(2)} L/h`;
            }
        }
        
        // Actualizar caudal total sumando todas las secciones
        function actualizarCaudalTotal() {
            let caudalTotal = 0;
            
            for (const codigo in secciones) {
                if (secciones[codigo].configurado) {
                    caudalTotal += secciones[codigo].caudal;
                }
            }
            
            document.getElementById('caudalTotal').textContent = `Caudal Total: ${caudalTotal.toFixed(2)} L/h`;
        }
        
        // Actualizar cálculos basados en área
        function actualizarCalculos() {
            // Actualizar metros lineales (estimación basada en área)
            const metrosPrincipal = Math.sqrt(areaTotal) * 2;
            const metrosSecundaria = Math.sqrt(areaTotal) * 4;
            const metrosRegante = Math.sqrt(areaTotal) * 8;
            const metrosTotal = metrosPrincipal + metrosSecundaria + metrosRegante;
            
            document.getElementById('metrosPrincipal').textContent = metrosPrincipal.toFixed(2) + ' m';
            document.getElementById('metrosSecundaria').textContent = metrosSecundaria.toFixed(2) + ' m';
            document.getElementById('metrosRegante').textContent = metrosRegante.toFixed(2) + ' m';
            document.getElementById('metrosTotal').textContent = metrosTotal.toFixed(2) + ' m';
            
            // Recalcular emisores
            calcularEmisores();
        }
        
        // Buscar ubicación en el mapa
        function buscarUbicacion() {
            const query = document.getElementById('location-search').value;
            if (!query.trim()) return;
            
            // Usar Nominatim (servicio de geocodificación de OpenStreetMap)
            fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        const result = data[0];
                        const lat = parseFloat(result.lat);
                        const lon = parseFloat(result.lon);
                        
                        map.setView([lat, lon], 15);
                        
                        // Añadir marcador
                        L.marker([lat, lon])
                            .addTo(map)
                            .bindPopup(`<b>${result.display_name}</b>`)
                            .openPopup();
                    } else {
                        alert('Ubicación no encontrada');
                    }
                })
                .catch(error => {
                    console.error('Error en la búsqueda:', error);
                    alert('Error al buscar la ubicación');
                });
        }
        
        // DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar el mapa inmediatamente
            initMap();
            
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const mainNav = document.getElementById('mainNav');
            const mainHeader = document.getElementById('mainHeader');
            
            // Menú móvil
            mobileMenuBtn.addEventListener('click', function() {
                mainNav.classList.toggle('active');
                
                const icon = mobileMenuBtn.querySelector('i');
                if (mainNav.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                    document.body.style.overflow = 'hidden';
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                    document.body.style.overflow = '';
                }
            });
            
            // Cerrar menú al hacer clic en un enlace
            const navLinks = document.querySelectorAll('#mainNav a');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    mainNav.classList.remove('active');
                    mobileMenuBtn.querySelector('i').classList.remove('fa-times');
                    mobileMenuBtn.querySelector('i').classList.add('fa-bars');
                    document.body.style.overflow = '';
                });
            });
            
            // Header scroll effect
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    mainHeader.classList.add('scrolled');
                } else {
                    mainHeader.classList.remove('scrolled');
                }
            });
            
            // Animaciones al hacer scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);
            
            // Observar elementos con clase fade-in
            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });
            
            // Smooth scroll para enlaces internos
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href !== '#' && !href.includes('.html')) {
                        e.preventDefault();
                        const targetElement = document.querySelector(href);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 100,
                                behavior: 'smooth'
                            });
                        }
                    }
                });
            });
            
            // Controladores para el diseñador de riego
            
            // Botón de búsqueda
            document.getElementById('searchBtn').addEventListener('click', buscarUbicacion);
            
            // Buscar al presionar Enter
            document.getElementById('location-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    buscarUbicacion();
                }
            });
            
            // Botón para delimitar terreno
            document.getElementById('drawPolygonBtn').addEventListener('click', function() {
                // Desactivar cualquier modo de dibujo actual
                if (currentDrawMode) {
                    currentDrawMode.disable();
                }
                
                // Activar modo dibujo de polígono
                currentDrawMode = new L.Draw.Polygon(map, drawControl.options.draw.polygon);
                currentDrawMode.enable();
                
                // Cambiar texto del botón
                this.innerHTML = '<i class="fas fa-hand-pointer"></i> Click para dibujar';
                this.style.backgroundColor = '#ff6b6b';
                
                // Restaurar botón después de 5 segundos
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-draw-polygon"></i> Delimitar Terreno';
                    this.style.backgroundColor = '';
                }, 5000);
            });
            
            // Botón para medir
            document.getElementById('measureBtn').addEventListener('click', function() {
                // Desactivar cualquier modo de dibujo actual
                if (currentDrawMode) {
                    currentDrawMode.disable();
                }
                
                // Activar modo dibujo de polilínea
                currentDrawMode = new L.Draw.Polyline(map, drawControl.options.draw.polyline);
                currentDrawMode.enable();
                
                // Cambiar texto del botón
                this.innerHTML = '<i class="fas fa-hand-pointer"></i> Click para medir';
                this.style.backgroundColor = '#ff6b6b';
                
                // Restaurar botón después de 5 segundos
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-ruler"></i> Medir';
                    this.style.backgroundColor = '';
                }, 5000);
            });
            
            // Botón para limpiar
            document.getElementById('clearBtn').addEventListener('click', function() {
                // Limpiar todos los elementos dibujados
                drawnItems.clearLayers();
                areaTotal = 0;
                document.getElementById('areaDisplay').textContent = 'Área: 0 m²';
                actualizarCalculos();
                inicializarSecciones();
                secciones = {};
                seccionActual = null;
                
                // Desactivar modo de dibujo actual
                if (currentDrawMode) {
                    currentDrawMode.disable();
                    currentDrawMode = null;
                }
            });
            
            // Pestañas CAD
            document.querySelectorAll('.cad-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Remover clase active de todas las pestañas
                    document.querySelectorAll('.cad-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    // Agregar clase active a la pestaña clickeada
                    this.classList.add('active');
                    
                    // Ocultar todos los contenidos
                    document.querySelectorAll('.cad-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Mostrar el contenido correspondiente
                    document.getElementById(tabId + '-tab').classList.add('active');
                });
            });
            
            // Elementos del diseño
            document.querySelectorAll('.elemento-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remover clase active de todos los botones
                    document.querySelectorAll('.elemento-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // Agregar clase active al botón clickeado
                    this.classList.add('active');
                    
                    selectedElement = this.dataset.elemento;
                    actualizarConfiguracionElemento();
                });
            });
            
            // Actualizar configuración de elemento seleccionado
            function actualizarConfiguracionElemento() {
                const configDiv = document.getElementById('elementoConfig');
                let contenido = '';
                
                switch(selectedElement) {
                    case 'cabezal':
                        contenido = `
                            <h4>Configuración del Cabezal</h4>
                            <div class="control-row">
                                <div class="control-label">Tipo:</div>
                                <select>
                                    <option>Básico</option>
                                    <option>Filtración</option>
                                    <option>Fertirriego</option>
                                    <option>Automático</option>
                                </select>
                            </div>
                            <div class="control-row">
                                <div class="control-label">Bombas:</div>
                                <input type="number" min="1" max="3" value="1">
                            </div>
                        `;
                        break;
                        
                    case 'purgaterminal':
                        contenido = `
                            <h4>Configuración de Purgas/Terminales</h4>
                            <div class="control-row">
                                <div class="control-label">Cantidad:</div>
                                <input type="number" min="1" max="20" value="4">
                            </div>
                            <div class="control-row">
                                <div class="control-label">Tipo:</div>
                                <select>
                                    <option>Automática</option>
                                    <option>Manual</option>
                                </select>
                            </div>
                        `;
                        break;
                        
                    case 'tomagua':
                        contenido = `
                            <h4>Configuración de Toma de Agua</h4>
                            <div class="control-row">
                                <div class="control-label">Diámetro:</div>
                                <select>
                                    <option>2"</option>
                                    <option>3"</option>
                                    <option>4"</option>
                                    <option>6"</option>
                                </select>
                            </div>
                            <div class="control-row">
                                <div class="control-label">Profundidad:</div>
                                <input type="number" min="0.5" max="5" value="1.2" step="0.1"> m
                            </div>
                        `;
                        break;
                        
                    case 'calle':
                        contenido = `
                            <h4>Configuración de Calles</h4>
                            <div class="control-row">
                                <div class="control-label">Ancho:</div>
                                <input type="number" min="2" max="6" value="3" step="0.5"> m
                            </div>
                            <div class="control-row">
                                <div class="control-label">Material:</div>
                                <select>
                                    <option>Tierra</option>
                                    <option>Grava</option>
                                    <option>Concreto</option>
                                </select>
                            </div>
                        `;
                        break;
                }
                
                configDiv.innerHTML = contenido;
            }
            
            // Inicializar configuración de elemento
            actualizarConfiguracionElemento();
            
            // Eventos para cálculos de emisores
            document.getElementById('caudalEmisor').addEventListener('input', calcularEmisores);
            document.getElementById('separacionEmisor').addEventListener('input', calcularEmisores);
            document.getElementById('separacionSurco').addEventListener('input', calcularEmisores);
            document.getElementById('tipoEmisor').addEventListener('change', function() {
                // Cambiar valores por defecto según tipo de emisor
                const tipo = this.value;
                const caudalInput = document.getElementById('caudalEmisor');
                const separacionInput = document.getElementById('separacionEmisor');
                
                switch(tipo) {
                    case 'goteo':
                        caudalInput.value = 4;
                        separacionInput.value = 0.5;
                        break;
                    case 'aspersion':
                        caudalInput.value = 30;
                        separacionInput.value = 12;
                        break;
                    case 'microaspersion':
                        caudalInput.value = 15;
                        separacionInput.value = 4;
                        break;
                }
                
                calcularEmisores();
            });
        });
    </script>
</body>
</html>